"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8279],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),f=a,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||i;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},7979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:1},o="Fault Tolerance",l={unversionedId:"Design/Dependability/Fault Tolerance",id:"Design/Dependability/Fault Tolerance",title:"Fault Tolerance",description:"As a cornerstone of mission-critical financial applications, Auticuro must ensure the highest",source:"@site/docs/Design/Dependability/Fault Tolerance.md",sourceDirName:"Design/Dependability",slug:"/Design/Dependability/Fault Tolerance",permalink:"/Auticuro/docs/Design/Dependability/Fault Tolerance",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Dependability",permalink:"/Auticuro/docs/category/dependability"},next:{title:"Disaster Recovery",permalink:"/Auticuro/docs/Design/Dependability/Disaster Recovery"}},s={},c=[],u={toc:c},p="wrapper";function d(e){let{components:t,...i}=e;return(0,a.kt)(p,(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"fault-tolerance"},"Fault Tolerance"),(0,a.kt)("p",null,"As a cornerstone of mission-critical financial applications, Auticuro must ensure the highest\nlevels of reliability and fault tolerance. Ensuring the system remains operational and responsive\neven in the face of unexpected events or failures is crucial to maintaining user trust and\nsafeguarding financial data. In the page, we will discuss the key strategies and design principles\nthat Auticuro employs to achieve exceptional fault tolerance, highlighting its resilience and\nrobustness in handling various challenges."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image info",src:n(8507).Z,width:"967",height:"595"})),(0,a.kt)("p",null,"All components in the above Auticuro shard are fault tolerant. Let's analyze how to achieve fault tolerance\nfrom the write side to the read side."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Command Side")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Network/Pod Failure"),(0,a.kt)("p",{parentName:"li"},"A typical deployment of one Auticuro shard consists of 5 replicas(1 leader + 4 followers), which is\navailable as long as the majority (n >= 3 in this case) are alive. If a follower undergoes a transient\nnetwork failure or pod failure, the service would not be affected. Meanwhile, the failed follower\nwould catch up when it recovers. If the leader fails, a new leader will be elected among the remaining\n4 followers, and the RTO (Recovery Time Objective) is less than 4 seconds.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Disk Failure"),(0,a.kt)("p",{parentName:"li"},"Auticuro periodically snapshots its state and uploads generated snapshots to cloud object storage,\naccelerating the recovery when a replica undergoes disk failure.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Error Detection"),(0,a.kt)("p",{parentName:"li"},"A recon engine incrementally pulls the raft log and event log from all 5 replicas in the background\nand compares them to detect potential divergence of the state machine. If divergence is detected,\nfault handling like rollback/roll forward is performed."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Event Store")),(0,a.kt)("p",null,"Databases like PostgreSQL store recently pulled events and backups them to cloud object storage via CDC,\nwhere CDC, a.k.a. Change Data Capture, refers to the process of identifying and capturing changes made\nto data in a database and then delivering those changes in real-time to a downstream process or system."),(0,a.kt)("p",null,"If RDBMS undergoes temporary failure, services on the query side fall back to query events directly\nfrom Auticuro. If RDBMS undergoes permanent failure, the event store recovers historical events from\ncloud object storage and recent events from Auticuro."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Query Side")),(0,a.kt)("p",null,"Services on the query side are stateless deployment in k8s, recovering from pod failure by rebuilding\nthe states from the event log."))}d.isMDXComponent=!0},8507:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/firm-wallet-deployment-f682dd55e7c84facabdc3575e4864f57.svg"}}]);